<div class="auth-container">
    <div class="auth-card">
      <div class="auth-header">
        <h2>Crear Cuenta</h2>
        <p>Únete a nuestra comunidad de recetas</p>
      </div>
  
      @if (errorMessage) {
        <div class="error-message">
          {{ errorMessage }}
        </div>
      }
  
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label for="username">Nombre de Usuario*</label>
            <input 
              type="text" 
              id="username" 
              formControlName="Nombre_de_usuario" 
              placeholder="Elija un nombre de usuario"
              [class.invalid]="registerForm.get('Nombre_de_usuario')?.invalid && registerForm.get('Nombre_de_usuario')?.touched"
            >
            @if (registerForm.get('Nombre_de_usuario')?.invalid && registerForm.get('Nombre_de_usuario')?.touched) {
              <div class="error-hint">
                @if (registerForm.get('Nombre_de_usuario')?.errors?.['required']) {
                  El nombre de usuario es obligatorio
                } @else if (registerForm.get('Nombre_de_usuario')?.errors?.['minlength']) {
                  El nombre de usuario debe tener al menos 3 caracteres
                }
              </div>
            }
          </div>
  
          <div class="form-group">
            <label for="email">Correo Electrónico*</label>
            <input 
              type="email" 
              id="email" 
              formControlName="Gmail" 
              placeholder="Ingrese su correo electrónico"
              [class.invalid]="registerForm.get('Gmail')?.invalid && registerForm.get('Gmail')?.touched"
            >
            @if (registerForm.get('Gmail')?.invalid && registerForm.get('Gmail')?.touched) {
              <div class="error-hint">
                @if (registerForm.get('Gmail')?.errors?.['required']) {
                  El correo electrónico es obligatorio
                } @else if (registerForm.get('Gmail')?.errors?.['email']) {
                  Ingrese un correo electrónico válido
                }
              </div>
            }
          </div>
        </div>
  
        <div class="form-row">
          <div class="form-group">
            <label for="nombre">Nombre*</label>
            <input 
              type="text" 
              id="nombre" 
              formControlName="Nombre" 
              placeholder="Ingrese su nombre"
              [class.invalid]="registerForm.get('Nombre')?.invalid && registerForm.get('Nombre')?.touched"
            >
            @if (registerForm.get('Nombre')?.invalid && registerForm.get('Nombre')?.touched) {
              <div class="error-hint">El nombre es obligatorio</div>
            }
          </div>
  
          <div class="form-group">
            <label for="apellidos">Apellidos*</label>
            <input 
              type="text" 
              id="apellidos" 
              formControlName="Apellidos" 
              placeholder="Ingrese sus apellidos"
              [class.invalid]="registerForm.get('Apellidos')?.invalid && registerForm.get('Apellidos')?.touched"
            >
            @if (registerForm.get('Apellidos')?.invalid && registerForm.get('Apellidos')?.touched) {
              <div class="error-hint">Los apellidos son obligatorios</div>
            }
          </div>
        </div>
  
        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña*</label>
            <input 
              type="password" 
              id="password" 
              formControlName="Contrasena" 
              placeholder="Cree una contraseña"
              [class.invalid]="registerForm.get('Contrasena')?.invalid && registerForm.get('Contrasena')?.touched"
            >
            @if (registerForm.get('Contrasena')?.invalid && registerForm.get('Contrasena')?.touched) {
              <div class="error-hint">
                @if (registerForm.get('Contrasena')?.errors?.['required']) {
                  La contraseña es obligatoria
                } @else if (registerForm.get('Contrasena')?.errors?.['minlength']) {
                  La contraseña debe tener al menos 6 caracteres
                }
              </div>
            }
          </div>
  
          <div class="form-group">
            <label for="confirmPassword">Confirmar Contraseña*</label>
            <input 
              type="password" 
              id="confirmPassword" 
              formControlName="confirmarContrasena" 
              placeholder="Confirme su contraseña"
              [class.invalid]="registerForm.get('confirmarContrasena')?.invalid && registerForm.get('confirmarContrasena')?.touched"
            >
            @if (registerForm.get('confirmarContrasena')?.invalid && registerForm.get('confirmarContrasena')?.touched) {
              <div class="error-hint">
                @if (registerForm.get('confirmarContrasena')?.errors?.['required']) {
                  Confirme su contraseña
                } @else if (registerForm.get('confirmarContrasena')?.errors?.['passwordMismatch']) {
                  Las contraseñas no coinciden
                }
              </div>
            }
          </div>
        </div>
  
        <div class="form-group checkbox-group">
          <div class="checkbox-container">
            <input 
              type="checkbox" 
              id="terms" 
              formControlName="Aceptacion_TYC"
            >
            <label for="terms">Acepto los <a href="#" target="_blank">Términos y Condiciones</a>*</label>
          </div>
          @if (registerForm.get('Aceptacion_TYC')?.invalid && registerForm.get('Aceptacion_TYC')?.touched) {
            <div class="error-hint">Debe aceptar los términos y condiciones</div>
          }
        </div>
  
        <div class="form-group checkbox-group">
          <div class="checkbox-container">
            <input 
              type="checkbox" 
              id="privacy" 
              formControlName="Aceptacion_Politica"
            >
            <label for="privacy">Acepto la <a href="#" target="_blank">Política de Privacidad</a>*</label>
          </div>
          @if (registerForm.get('Aceptacion_Politica')?.invalid && registerForm.get('Aceptacion_Politica')?.touched) {
            <div class="error-hint">Debe aceptar la política de privacidad</div>
          }
        </div>
  
        <div class="form-actions">
          <button 
            type="submit" 
            class="btn-submit" 
            [disabled]="registerForm.invalid || isLoading"
          >
            @if (isLoading) {
              <span class="spinner"></span>
              Registrando...
            } @else {
              Crear Cuenta
            }
          </button>
        </div>
      </form>
  
      <div class="auth-footer">
        <p>¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión aquí</a></p>
      </div>
    </div>
  </div>
